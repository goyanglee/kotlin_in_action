# 8ì¥. ê³ ì°¨ í•¨ìˆ˜: íŒŒë¼ë¯¸í„°ì™€ ë°˜í™˜ ê°’ìœ¼ë¡œ ëŒë‹¤ ì‚¬ìš©

8ì¥ì—ì„œ ë‹¤ë£¨ëŠ” ë‚´ìš©

- í•¨ìˆ˜íƒ€ì…
- ê³ ì°¨ í•¨ìˆ˜ì™€ ì½”ë“œë¥¼ êµ¬ì¡°í™”í•  ë•Œ ê³ ì°¨ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•
- ì¸ë¼ì¸ í•¨ìˆ˜
- ë¹„ë¡œì»¬ returnê³¼ ë ˆì´ë¸”
- ë¬´ëª… í•¨ìˆ˜

# 8.1 ê³ ì°¨ í•¨ìˆ˜ ì •ì˜

ê³ ì°¨í•¨ìˆ˜: ë‹¤ë¥¸ í•¨ìˆ˜ë¥¼ ì¸ìë¡œ ë°›ê±°ë‚˜ í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜.

ì½”í‹€ë¦°ì—ì„œëŠ” ëŒë‹¤ë‚˜ í•¨ìˆ˜ ì°¸ì¡°ë¥¼ ì‚¬ìš©í•´ í•¨ìˆ˜ë¥¼ ê°’ìœ¼ë¡œ í‘œí˜„í•  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, ê³ ì°¨í•¨ìˆ˜ëŠ” ëŒë‹¤ë‚˜ í•¨ìˆ˜ ì°¸ì¡°ë¥¼ ì¸ìë¡œ ë„˜ê¸¸ ìˆ˜ ìˆê±°ë‚˜ ëŒë‹¤ë‚˜ í•¨ìˆ˜ ì°¸ì¡°ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ë‹¤.

list.filter{ x > 0 } 

## 8.1.1 í•¨ìˆ˜ íƒ€ì…

ëŒë‹¤ë¥¼ ë¡œì»¬ ë³€ìˆ˜ì— ëŒ€ì… í•˜ëŠ” ê²½ìš°

ì½”í‹€ë¦°ì˜ íƒ€ì… ì¶”ë¡ ìœ¼ë¡œ ì¸í•´ ë³€ìˆ˜ íƒ€ì…ì„ ì§€ì •í•˜ì§€ ì•Šì•„ë„ ëŒë‹¤ë¥¼ ë³€ìˆ˜ì— ëŒ€ì…í•  ìˆ˜ ìˆìŒì„ ì´ë¯¸ ì•Œ ê²ƒ.

```kotlin
//ì»´íŒŒì¼ëŸ¬ê°€ sumì´ í•¨ìˆ˜ íƒ€ì…ì„ì„ ì¶”ë¡ 
val sum = {x:Int, y:Int â†’ X+Y} 
val action = {println(42)} 

//ê° ë³€ìˆ˜ì— êµ¬ì²´ì ì¸ íƒ€ì… ì„ ì–¸ì„ ì¶”ê°€
val sum: (Int,Int) -> Int = {x,y -> x+y} //int íŒŒë¼ë¯¸í„°ë¥¼ 2ê°œ ë°›ì•„ì„œ int ê°’ì„ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜
val action:() -> Unit = {println(42)} // ì•„ë¬´ëŸ° ì¸ìë„ ë°›ì§€ ì•Šê³  ì•„ë¬´ëŸ° ê°’ë„ ë°˜í™˜í•˜ì§€ ì•ŠëŠ” í•¨ìˆ˜
var canReturnNull: (Int,Int) -> Int? = {x,y -> null} //ë°˜í™˜ì´ ë„ì´ ë  ìˆ˜ ìˆëŠ” í•¨ìˆ˜ íƒ€ì… ë³€ìˆ˜
var funOfNull: ((Int,Int) -> Int)? = null //í•¨ìˆ˜ íƒ€ì… ì „ì²´ê°€ ë„ì´ ë  ìˆ˜ ìˆëŠ” íƒ€ì…

```

ì½”í‹€ë¦° í•¨ìˆ˜ íƒ€ì… ë¬¸ë²•:  (íŒŒë¼ë¯¸í„° íƒ€ì…) â†’ ë°˜í™˜íƒ€ì… 

** í•¨ìˆ˜ íƒ€ì…ì„ ì„ ì–¸í•  ë• Unitë„ ìƒëµë¶ˆê°€

```kotlin
fun performRequest(
       url: String,
       callback: (code: Int, content: String) -> Unit //í•¨ìˆ˜íƒ€ì…ì˜ ê° íŒŒë¼ë¯¸í„°ì— ì´ë¦„ ì§€ì •
) {
    /*...*/
}

fun main(args: Array<String>) {
    val url = "http://kotl.in"
    performRequest(url) { code, content -> /*...*/ } 
    performRequest(url) { code, page -> /*...*/ } //ê¼­ ì•ˆë”°ë¼ë„ë¨
}
```

: íŒŒë¼ë¯¸í„° ì´ë¦„ì€ íƒ€ì… ê²€ì‚¬ ì‹œ ë¬´ì‹œë˜ì–´ ì¼ì¹˜í•˜ì§€ ì•Šì•„ë„ ë˜ì§€ë§Œ, ì½”ë“œ ê°€ë…ì„±ì„ ì¢‹ì•„ì§€ê²Œ í•´ì¤€ë‹¤.

## 8.1.2 ì¸ìë¡œ ë°›ëŠ” í•¨ìˆ˜ í˜¸ì¶œ

```kotlin
fun twoAndThree(operation: (Int, Int) -> Int) {
    val result = operation(2, 3)
    println("The result is $result")
}

fun main(args: Array<String>) {
    twoAndThree { a, b -> a + b }
    twoAndThree { a, b -> a * b }
}

/*
The result is 5
The result is 6
*/
```

ìˆ ì–´.. ëŠ”..ì„œìˆ ì–´..filter í•¨ìˆ˜ëŠ” .. ìˆ ì–´ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë°›ëŠ”ë‹¤. ....Q.predicate(ìˆ ì–´): booleanì„ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜

```kotlin
fun String.filter(predicate: (Char) -> Boolean): String {
    val sb = StringBuilder()
    for (index in 0 until length) {
        val element = get(index)
        if (predicate(element)) sb.append(element)
																				 //predicate íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬ë°›ì€ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤.
    }
    return sb.toString()
}

fun main(args: Array<String>) {
    println("ab1c".filter { it in 'a'..'z' }) //ë¬¸ìì—´ì„ charë¡œ í•˜ë‚˜ì”© ë„˜ê¸´ë‹¤. 
}

/*
abc
*/
```

## 8.1.3 ìë°”ì—ì„œ ì½”í‹€ë¦° í•¨ìˆ˜ íƒ€ì… ì‚¬ìš©

```kotlin
/* Kotlin declaration */
fun processTheAnswer(f: (Int) -> Int) {
    println(f(42))
}

/* JAVA */
fun processorTheAnser(number -> number + 1); //ìë°”8 ëŒë‹¤ë¥¼ ë„˜ê¸°ë©´ ìë™ìœ¼ë¡œ í•¨ìˆ˜ íƒ€ì…ì˜ ê°’ìœ¼ë¡œ ë³€í™˜ëœë‹¤. 

/*
43
*/

//ìë°” 8 ì´ì „? ìš°ë¦¬ê°€ ì“¸ ì¼ ì—†ì–´ë³´ì„!

```

ëŒë‹¤ë¥¼ ì¸ìë¡œ ë°›ëŠ” í™•ì¥ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì•¼í•  ë•Œ

: ìˆ˜ì‹ ê°ì²´ë¥¼ í™•ì¥ í•¨ìˆ˜ì˜ ì²« ë²ˆì§¸ ì¸ìë¡œ ëª…ì‹œì ìœ¼ë¡œ ë„˜ê²¨ì•¼ í•˜ë¯€ë¡œ ì½”í‹€ë¦°ì—ì„œ í™•ì¥ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•Œ ì²˜ëŸ¼ ì½”ë“œê°€ ë§ë”í•˜ì§€ëŠ” ì•Šë‹¤. 

```java
/* JAVA */

List<String> strings = new ArrayList();
strings.add("42");
CollectionsKt.forEach(strings, s -> //stringsëŠ” í™•ì¥í•¨ìˆ˜ì˜ ìˆ˜ì‹  ê°ì²´
																	  //ì½”í‹€ë¦° í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ê°€ì ¸ì˜¨ í•¨ìˆ˜ë¥¼ ìë°” ì½”ë“œì—ì„œ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤. 
	   System.out.println(s);
     return Unit.INSTANCE; //Unit íƒ€ì…ì˜ ê°’ì„ ëª…ì‹œì ìœ¼ë¡œ ë°˜í™˜í•´ì•¼ í•œë‹¤.//voidë¥¼ ê·¸ëƒ¥ ë¦¬í„´í•  ìˆ˜ ì—†ë‹¤. 
}
```

## 8.1.4 ë””í´íŠ¸ ê°’ì„ ì§€ì •í•œ í•¨ìˆ˜ íƒ€ì… íŒŒë¼ë¯¸í„°ë‚˜ ë„ì´ ë  ìˆ˜ ìˆëŠ” í•¨ìˆ˜ íƒ€ì… íŒŒë¼ë¯¸í„°

```kotlin
fun <T> Collection<T>.joinToString(
        separator: String = ", ",
        prefix: String = "",
        postfix: String = "",
        transform: (T) -> String = { it.toString() } //í•¨ìˆ˜ íƒ€ì…ì„ ì„ ì–¸í•˜ë©´ì„œ ëŒë‹¤ë¥¼ ë””í´íŠ¸ ê°’ìœ¼ë¡œ ì§€ì •
): String {
    val result = StringBuilder(prefix)

    for ((index, element) in this.withIndex()) {
        if (index > 0) result.append(separator)
        result.append(transform(element)) //íŒŒë¼ë¯¸í„°ë¡œ ë°›ì€ í•¨ìˆ˜ í˜¸ì¶œ
    }

    result.append(postfix)
    return result.toString()
}

fun main(args: Array<String>) {
    val letters = listOf("Alpha", "Beta")
    println(letters.joinToString()) //ë””í´íŠ¸ ë³€í™˜í•¨ìˆ˜ì‚¬ìš©
    println(letters.joinToString { it.toLowerCase() }) //ëŒë‹¤ë¥¼ ì¸ìë¡œ ì „ë‹¬
    println(letters.joinToString(separator = "! ", postfix = "! ",
           transform = { it.toUpperCase() })) //ì´ë¦„ì„ ë¶™í˜€ ì „ë‹¬
}

/*
Alpha, Beta
alpha, beta
ALPHA! BETA!
*/
```

Q. ì´ ì˜ˆì œê°€ ì• ì˜ˆì œë‘ ë­ê°€ ë‹¤ë¥¸ì§€..?

```kotlin
fun <T> Collection<T>.joinToString(
        separator: String = ", ",
        prefix: String = "",
        postfix: String = "",
        transform: ((T) -> String)? = null
): String {
    val result = StringBuilder(prefix)

    for ((index, element) in this.withIndex()) {
        if (index > 0) result.append(separator)
        val str = transform?.invoke(element) //Q.. ê·¸ëŸ¼ ì¸ìë¡œ ë°›ì€ í•¨ìˆ˜ê°€ í˜¸ì¶œ ë¼?
            ?: element.toString() //ì¸ìë¡œ ë°›ì€ í•¨ìˆ˜ê°€ ì—†ìœ¼ë©´ ê·¸ëƒ¥ toString
        result.append(str)
    }

    result.append(postfix)
    return result.toString()
}

fun main(args: Array<String>) {
    val letters = listOf("Alpha", "Beta")
    println(letters.joinToString())
    println(letters.joinToString { it.toLowerCase() })
    println(letters.joinToString(separator = "! ", postfix = "! ",
           transform = { it.toUpperCase() }))
}
```

.invoke

ì°¸ê³  : [https://velog.io/@cgw0519/Kotlin-invoke-í•¨ìˆ˜ëŠ”-ë¬´ì—‡ì¼ê¹Œ](https://velog.io/@cgw0519/Kotlin-invoke-%ED%95%A8%EC%88%98%EB%8A%94-%EB%AC%B4%EC%97%87%EC%9D%BC%EA%B9%8C)

## 8.1.5 í•¨ìˆ˜ë¥¼ í•¨ìˆ˜ì—ì„œ ë°˜í™˜

ì‚¬ìš©ìê°€ ì„ íƒí•œ ë°°ì†¡ìˆ˜ë‹¨ì— ë”°ë¼ ë°°ì†¡ë¹„ë¥¼ ê³„ì‚°í•˜ëŠ” ë°©ë²•ì´ ë‹¬ë¼ì§ˆ ë•Œ, ì ì ˆí•œ ë¡œì§ì„ ì„ íƒí•´ í•¨ìˆ˜ë¡œ ë°˜í™˜í•˜ëŠ” ì˜ˆì œ

```kotlin
enum class Delivery { STANDARD, EXPEDITED }

class Order(val itemCount: Int)

fun getShippingCostCalculator(
        delivery: Delivery): (Order) -> Double { //í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ ì„ ì–¸
    if (delivery == Delivery.EXPEDITED) {
        return { order -> 6 + 2.1 * order.itemCount }
    }

    return { order -> 1.2 * order.itemCount } //í•¨ìˆ˜ì—ì„œ ëŒë‹¤ë¥¼ ë°˜í™˜í•œë‹¤. //ë˜‘ê°™ì´ returnì‚¬ìš©
}

fun main(args: Array<String>) {
    val calculator = //ë°˜í™˜ë°›ì€ í•¨ìˆ˜ë¥¼ ë³€ìˆ˜ì— ì €ì¥í•œë‹¤. 
        getShippingCostCalculator(Delivery.EXPEDITED)
    println("Shipping costs ${calculator(Order(3))}") //ë°˜í™˜ë°›ì€ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤. 
}

/*
Shipping costs 12.3
*/
```

ì—°ë½ì²˜ ëª©ë¡ì„ í•„í„°ë§í•˜ê³ , ì´ë¦„ê³¼ ì„±ì˜ ì ‘ë‘ì‚¬ë¥¼ ê²€ì‚¬í•˜ê³  ì „í™”ë²ˆí˜¸ê°€ ì—°ë½ì²˜ì—ìˆëŠ”ì§€ë„ ê²€ì‚¬í•˜ëŠ” ì˜ˆì œ.

```kotlin
data class Person(
        val firstName: String,
        val lastName: String,
        val phoneNumber: String?
)

class ContactListFilters {
    var prefix: String = ""
    var onlyWithPhoneNumber: Boolean = false

    fun getPredicate(): (Person) -> Boolean {
        val startsWithPrefix = { p: Person -> //í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì •ì˜ 
            p.firstName.startsWith(prefix) || p.lastName.startsWith(prefix)
        }
        if (!onlyWithPhoneNumber) {
            return startsWithPrefix //í•¨ìˆ˜ íƒ€ì…ì˜ ë³€ìˆ˜ë¥¼ ë°˜í™˜í•œë‹¤. 
        }
        return { startsWithPrefix(it) //ëŒë‹¤ë¥¼ ë°˜í™˜í•œë‹¤.
                    && it.phoneNumber != null }
    }
}

fun main(args: Array<String>) {
    val contacts = listOf(Person("Dmitry", "Jemerov", "123-4567"),
                          Person("Svetlana", "Isakova", null))
    val contactListFilters = ContactListFilters()
    with (contactListFilters) { //with: ëŒë‹¤ë¥¼ ì‹¤í–‰í•œ ê²°ê³¼ë¥¼ ë°˜í™˜.
        prefix = "Dm"
        onlyWithPhoneNumber = true
    }
    println(contacts.filter( //ë°˜í™˜ëœ í•¨ìˆ˜ë¥¼ filterì˜ ì¸ìë¡œ ë„˜ê¸´ë‹¤. 
        contactListFilters.getPredicate()))
}

/*
[Person(firstName=Dmitry, lastName=Jemerov, phoneNumber=123-4567)]
*/
```

## 8.1.6 ëŒë‹¤ë¥¼ í™œìš©í•œ ì¤‘ë³µ ì œê±°

í•¨ìˆ˜ íƒ€ì…ê³¼ ëŒë‹¤ ì‹ì€ ì¬í™œìš©í•˜ê¸° ì¢‹ì€ ì½”ë“œë¥¼ ë§Œë“¤ ë•Œ ì“¸ ìˆ˜ ìˆëŠ” í›Œë¥­í•œ ë„êµ¬ë‹¤.

ì›¹ì‚¬ì´íŠ¸ ë°©ë¬¸ ê¸°ë¡ì„ ë¶„ì„í•˜ëŠ” ì˜ˆì œ. 

```kotlin
data class SiteVisit(
    val path: String, //ë°©ë¬¸í•œ ì‚¬ì´íŠ¸ì˜ ê²½ë¡œ
    val duration: Double, //ì‚¬ì´íŠ¸ì—ì„œ ë¨¸ë¬¸ ì‹œê°„
    val os: OS //ì‚¬ìš©ìì˜ ìš´ì˜ì²´ì œ
)

enum class OS {WINDOWS,LINUX,MAC,IOS,ANDROID}

val log=listOf(
    SiteVisit("/", 34.0, OS.WINDOWS),
    SiteVisit("/", 22.0, OS.MAC),
    SiteVisit("/login", 12.0, OS.WINDOWS),
    SiteVisit("/signup", 8.0, OS.IOS),
    SiteVisit("/", 16.3, OS.ANDROID)
)

valaverageWindowsDuration=log
.filter{ it.os == OS.WINDOWS}
.map(SiteVisit::duration)
    .average()

fun main(args: Array<String>) {
println(averageWindowsDuration)
}
```

1. ìœˆë„ìš° ì‚¬ìš©ìì˜ í‰ê·  ë°©ë¬¸ ì‹œê°„ì„ ì¶œë ¥í•˜ê³  ì‹¶ì„ ë•Œ. 

```kotlin
fun List<SiteVisit>.averageDurationFor(os: OS) =
        filter { it.os == os }.map(SiteVisit::duration).average()

fun main(args: Array<String>) {
    println(log.averageDurationFor(OS.WINDOWS))
    println(log.averageDurationFor(OS.MAC))
}
```

1. ëª¨ë°”ì¼ ì‚¬ìš©ìì˜ í‰ê·  ë°©ë¬¸ ì‹œê°„ì„ êµ¬í•˜ê³  ì‹¶ì„ ë•Œ (í•„í„° í•˜ë“œì½”ë”©)

```kotlin
val averageMobileDuration = log
    .filter { it.os in setOf(OS.IOS, OS.ANDROID) }
    .map(SiteVisit::duration)
    .average()

fun main(args: Array<String>) {
    println(averageMobileDuration)
}
```

1. ê³ ì°¨ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ ì¤‘ë³µì„ ì œê±°í•˜ê³ , ë‹¤ì–‘í•œ ìƒí™©ì— ëŒ€í•œ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•˜ë„ë¡ ë³€ê²½

```kotlin
fun List<SiteVisit>.averageDurationFor(predicate: (SiteVisit) -> Boolean) =
        filter(predicate).map(SiteVisit::duration).average()

fun main(args: Array<String>) {
    println(log.averageDurationFor {
        it.os in setOf(OS.ANDROID, OS.IOS) })
    println(log.averageDurationFor {
        it.os == OS.IOS && it.path == "/signup" })
}
```

> ì¼ë¶€ ì˜ ì•Œë ¤ì§„(ê°ì²´ì§€í–¥) ë””ìì¸ íŒ¨í„´ì„, í•¨ìˆ˜ íƒ€ì…ê³¼ ëŒë‹¤ ì‹ì„ ì‚¬ìš©í•´ ë‹¨ìˆœí™”í•  ìˆ˜ ìˆë‹¤. ë””ìì¸ íŒ¨í„´ ì¤‘. ì „ëµ íŒ¨í„´ì„ ìƒê°í•´ë³´ì.
ëŒë‹¤ ì‹ì´ ì—†ë‹¤ë©´ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì„ ì–¸í•˜ê³  êµ¬í¸ í´ë˜ìŠ¤ë¥¼ í†µí•´ ì „ëµì„ ì •ì˜í•´ì•¼ í•œë‹¤. í•¨ìˆ˜ íƒ€ì…ì„ ì–¸ì–´ê°€ ì§€ì›í•˜ë©´ ì¼ë°˜
í•¨ìˆ˜ íƒ€ì…ì„ ì‚¬ìš©í•´ ì „ëµì„ í‘œí˜„í•  ìˆ˜ ìˆê³  ê²½ìš°ì— ë”°ë¼ ë‹¤ë¥¸ ëŒë‹¤ ì‹ì„ ë„˜ê¹€ìœ¼ë¡œì¨ ì—¬ëŸ¬ ì „ëµì„ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤.
> 

# 8.2 ì¸ë¼ì¸ í•¨ìˆ˜: ëŒë‹¤ì˜ ë¶€ê°€ ë¹„ìš© ì—†ì• ê¸°

ì½”í‹€ë¦°ì—ì„œ ëŒë‹¤ë¥¼ í•¨ìˆ˜ ì¸ìë¡œ ë„˜ê¸°ëŠ” êµ¬ë¬¸ì´ ifë‚˜ forì™€ ê°™ì€ ì¼ë°˜ ë¬¸ì¥ê³¼ ë¹„ìŠ·í•˜ë‹¤ëŠ” ì‚¬ì‹¤ì„ ì—¬ëŸ¬ë¶„ë„ ëˆˆì¹˜ ì±˜ì„ ê²ƒì´ë‹¤. ex) with, apply

<aside>
ğŸ’¡ ë³µìŠµíƒ€ì„!!!

</aside>

with : ìˆ˜ì‹  ê°ì²´ ì§€ì • ëŒë‹¤: ìˆ˜ì‹  ê°ì²´ë¥¼ ëª…ì‹œí•˜ì§€ ì•Šê³  ëŒë‹¤ì˜ ë³¸ë¬¸ ì•ˆì—ì„œ ë‹¤ë¥¸ ê°ì²´ì˜ ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆê²Œ í•œë‹¤. : ëŒë‹¤ë¥¼ ì‹¤í–‰í•œ ê²°ê³¼ë¥¼ ë°˜í™˜

```kotlin
 return with(stringBuilder) { //ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ë ¤ëŠ” ìˆ˜ì‹  ê°ì²´ë¥¼ ì§€ì •
        for (letter in 'A'..'Z') {
            append(letter) 
        }
        append("\nNow I know the alphabet!") //thisìƒëµ
        toString() //ëŒë‹¤ì—ì„œ ê°’ì„ ë°˜í™˜
    }
```

apply : withì™€ ê±°ì˜ ìœ ì‚¬í•˜ì§€ë§Œ, applyëŠ” í•­ìƒ ìì‹ ì—ê²Œ ì „ë‹¬ëœ ê°ì²´(ì¦‰ ìˆ˜ì‹ ê°ì²´)ë¥¼ ë°˜í™˜

```kotlin
fun alphabet() = StringBuilder().apply { //í™•ì¥ í•¨ìˆ˜ í˜•íƒœ
    for (letter in 'A'..'Z') {
        append(letter)
    }
    append("\nNow I know the alphabet!")
}.toString()
```

ëŒë‹¤ë¥¼ ìµëª… í´ë˜ìŠ¤ë¡œ ì»´íŒŒì¼í•˜ì§€ë§Œ, ê·¸ë ‡ë‹¤ê³  ëŒë‹¤ ì‹ì„ ì‚¬ìš©í•  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ í´ë˜ìŠ¤ê°€ ë§Œë“¤ì–´ì§€ì§€ëŠ” ì•ŠëŠ”ë‹¤ëŠ” ì‚¬ì‹¤ì„ ì„¤ëª…í–ˆê³ ,

ëŒë‹¤ê°€ ë³€ìˆ˜ë¥¼ í¬íší•˜ë©´ ëŒë‹¤ê°€ ìƒì„±ë˜ëŠ” ì‹œì  ë§ˆë‹¤ ìƒˆë¡œìš´ ìµëª… í´ë˜ìŠ¤ ê°ì²´ê°€ ìƒê¸´ë‹¤ëŠ” ì‚¬ì‹¤ë„ ì„¤ëª…í–ˆë‹¤. ì´ëŸ° ê²½ìš° ì‹¤í–‰ ì‹œì ì— ìµëª… í´ë˜ìŠ¤ ìƒì„±ì— ë”°ë¥¸ ë¶€ê°€ ë¹„ìš©ì´ ë“ ë‹¤. ë”°ë¼ì„œ ëŒë‹¤ë¥¼ ì‚¬ìš©í•˜ëŠ” êµ¬í˜„ì€ ë˜‘ê°™ì€ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ì¼ë°˜í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œ êµ¬í˜„ë³´ë‹¤ ëœ íš¨ìœ¨ì ì´ë‹¤. 

<aside>
ğŸ’¡ ë³µìŠµíƒ€ì„!!!

</aside>

```kotlin
//ìµëª… í´ë˜ìŠ¤ê°€ ìˆëŠ” ìœ ì¼í•œ ì¶”ìƒë©”ì†Œë“œë¥¼ êµ¬í˜„í•  ë•Œ ëŒë‹¤ ë³¸ë¬¸ì„ ë©”ì†Œë“œ ë³¸ë¬¸ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤.
postponecomputation(1000){println(42)} //ì»´íŒŒì¼ëŸ¬ê°€ ëŒë‹¤ë¥¼ Runnableë¡œ ìë™ ë³€í™˜

```

**ëŒë‹¤ì™€ ìµëª… ê°ì²´ ì‚¬ì´ì˜ ì°¨ì´**

: ëŒë‹¤ëŠ” Runnable ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë³€ìˆ˜ì— ì €ì¥í•˜ê³  ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•  ë•Œ ë§ˆë‹¤ ê·¸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•œë‹¤.

í”„ë¡œê·¸ë¨ ì „ì²´ì—ì„œ Runnableì˜ ì¸ìŠ¤í„´ìŠ¤ëŠ” ë‹¨ í•˜ë‚˜ë§Œ ë§Œë“¤ì–´ì§„ë‹¤. 

ëŒë‹¤ì— ëŒ€ì‘í•˜ëŠ” ìµëª… ê°ì²´ë¥¼ ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•  ë•Œ ë§ˆë‹¤ ë°˜ë³µ ì‚¬ìš© í•œë‹¤. 

ë‹¨, ì£¼ë³€ ì˜ì—­ì˜ ë³€ìˆ˜ë¥¼ í¬íší•œë‹¤ë©´ ìƒˆë¡œìš´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•´ì¤€ë‹¤

```kotlin
fun handlecomputeration(id:String){
	postponecomputation(1000){println(id)}
}
```

### inline

ì–´ë–¤ í•¨ìˆ˜ì— í•´ë‹¹ ë³€ê²½ìë¥¼ ë¶™ì´ë©´ ì»´íŒŒì¼ëŸ¬ëŠ” ê·¸ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ëª¨ë“  ë¬¸ì¥ì„ í•¨ìˆ˜ ë³¸ë¬¸ì— í•´ë‹¹í•˜ëŠ” ë°”ì´íŠ¸ ì½”ë“œë¡œ ë°”ê¿”ì¹˜ê¸° í•´ì¤€ë‹¤. (ë°˜ë³µë˜ëŠ” ì½”ë“œë¥¼ ë³„ë„ì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ í•¨ìˆ˜ë¡œ ë¹¼ë‚´ë˜ ì»´íŒŒì¼ëŸ¬ê°€ ìë°”ì˜ ì¼ë°˜ ëª…ë ¹ë¬¸ë§Œí¼ íš¨ìœ¨ì ì¸ ì½”ë“œë¥¼ ìƒì„±í•˜ê²Œ ë§Œë“¤ ìˆ˜ëŠ” ì—†ì„ê¹Œ?ì˜ ë‹µ..) 

## 8.2.1 ì¸ë¼ì´ë‹ì´ ì‘ë™í•˜ëŠ” ë°©ì‹

ì–´ë–¤ í•¨ìˆ˜ë¥¼ inlineìœ¼ë¡œ ì„ ì–¸ â†’ ê·¸ í•¨ìˆ˜ì˜ ë³¸ë¬¸ì´ ì¸ë¼ì¸.

: í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ì½”ë“œë¥¼ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ë°”ì´íŠ¸ì½”ë“œ ëŒ€ì‹ ì— í•¨ìˆ˜ ë³¸ë¬¸ì„ ë²ˆì—­í•œ ë°”ì´íŠ¸ ì½”ë“œë¡œ ì»´íŒŒì¼í•œë‹¤ëŠ” ëœ».

<aside>
ğŸ’¡ ì¸ë¼ì¸ì´ë¼ëŠ” ì˜ë¯¸ëŠ” ì½”ë“œ ë¼ì¸ ìì²´ê°€ ì•ˆìœ¼ë¡œ ë“¤ì–´ê°„ë‹¤ëŠ” ëœ». ì¦‰, í•¨ìˆ˜ì˜ ë‚´ìš©ì„ í˜¸ì¶œì„ í†µí•´ì„œ ì‹¤í–‰ì‹œí‚¤ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, í˜¸ì¶œí•˜ëŠ” ì½”ë“œ ìì²´ê°€ í•¨ìˆ˜ ë‚´ìš©ì˜ ì½”ë“œê°€ ë˜ëŠ” íš¨ê³¼ê°€ ëœë‹¤ëŠ” ì ì´ë‹¤.

</aside>

ì¶œì²˜:

[https://thinkpro.tistory.com/140](https://thinkpro.tistory.com/140)

[THINK-PRO BLOG]

ë‹¤ì¤‘ ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œ ì–´ë–¤ ê³µìœ  ìì›ì— ëŒ€í•œ ë™ì‹œì ‘ê·¼ì„ ë§‰ê¸° ìœ„í•œ ì˜ˆì œ. 

Lock ê°ì²´ë¥¼ ì ê·¸ê³  ì£¼ì–´ì§„ ì½”ë“œ ë¸”ë¡ì„ ì‹¤í–‰í•œ ë‹¤ìŒì— Lock ê°ì²´ì— ëŒ€í•œ ì ê¸ˆì„ í•´ì œí•œë‹¤.

```kotlin

inline fun <T> syncronized(lock:Lock,action: ()->T):T{ //ë³¸ë¬¸ë¿ì•„ë‹ˆë¼, ì „ë‹¬ëœ ëŒë‹¤ì˜ ë³¸ë¬¸ë„ í•¨ê»˜ ì¸ë¼ì´ë‹ëœë‹¤ëŠ” ì ì— ìœ ì˜í•˜ë¼.
																										 //ëŒë‹¤ ëŒ€ì‹ ì— í•¨ìˆ˜ íƒ€ì…ì¸ ë³€ìˆ˜ë¥¼ ì¸ìë¡œ ë„˜ê¸°ë©´ ì¸ë¼ì´ë‹ ë˜ì§€ì•ŠëŠ”ë‹¤.
	lock.lock()
	try {
val temp =fun():String = "Hi"
		return fun():String = "Hi"
    after(temp)
	}
	finally {
		lock.unlock()
	}
}

val l=Lock()
synchronized(l){
 //...
}
```

: ëŒë‹¤ì˜ ë³¸ë¬¸ì— ì˜í•´ ë§Œë“¤ì–´ì§€ëŠ” ë°”ì´íŠ¸ ì½”ë“œëŠ” ê·¸ ëŒë‹¤ë¥¼ í˜¸ì¶œí•˜ëŠ” ì½”ë“œ(syncronized) ì •ì˜ì˜ ì¼ë¶€ë¶„ìœ¼ë¡œ ê°„ì£¼ë˜ê¸° ë•Œë¬¸ì— ì½”í‹€ë¦° ì»´íŒŒì¼ëŸ¬ëŠ” ê·¸ ëŒë‹¤ë¥¼ í•¨ìˆ˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ë¬´ëª… í´ë˜ìŠ¤ë¡œ ê°ì‹¸ì§€ ì•ŠëŠ”ë‹¤.

## 8.2.2 ì¸ë¼ì¸ í•¨ìˆ˜ì˜ í•œê³„

ê·¸ëŸ¬ë‹ˆê¹Œ... 

noinline ë³€ê²½ì : ì¸ë¼ì´ë‹ ê¸ˆì§€

## 8.2.3 ì»¬ë ‰ì…˜ ì—°ì‚° ì¸ë¼ì´ë‹

1. filterë¥¼ ì‚¬ìš©í•´ ëŒë‹¤ë¡œ ì»¬ë ‰ì…˜ ê±°ë¥´ê¸°.

```kotlin
data class Person(val name: String, val age: Int)

val people = listOf(Person("Alice", 29), Person("Bob", 31))

fun main(args: Array<String>) {
    println(people.filter { it.age < 30 })
}
```

1. ì»¬ë ‰ì…˜ì„ ì§ì ‘ ê±°ë¥´ê¸°

```kotlin
var result = mutableListOf<Person>()
for(people in people){
	if(person.age < 30) result.add(person)
}

println(result)
```

ì½”í‹€ë¦°ì— filterëŠ” ì¸ë¼ì¸ í•¨ìˆ˜ë¼, ëŒë‹¤ ë³¸ë¬¸ì˜ ë°”ì´íŠ¸ ì½”ë“œì™€ í•¨ê»˜ filterë¥¼ í˜¸ì¶œí•œ ìœ„ì¹˜ì— ë“¤ì–´ê°€ê¸° ë•Œë¬¸ì— ìœ„ ì•„ë˜ëŠ” ê±°ì˜ ê°™ë‹¤.

1. filterì™€ mapì„ ì—°ì‡„í•´ì„œ ì‚¬ìš©í•œ ì˜ˆì œ

```kotlin
data class Person(val name: String, val age: Int)

val people = listOf(Person("Alice", 29), Person("Bob", 31))

fun main(args: Array<String>) {
    println(people.filter { it.age > 30 }
                  .map(Person::name))
}
```

ì½”í‹€ë¦° í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ì»¬ë ‰ì…˜ í•¨ìˆ˜ëŠ” ëŒ€ë¶€ë¶„ ëŒë‹¤ë¥¼ ì¸ìë¡œ ë°›ëŠ”ë‹¤. filterì™€ mapì€ ì¸ë¼ì¸ í•¨ìˆ˜ë‹¤. 

ë”°ë¼ì„œ ê·¸ ë‘ í•¨ìˆ˜ì˜ ë³¸ë¬¸ì€ ì¸ë¼ì´ë‹ë˜ë©°, ì¶”ê°€ ê°ì²´ë‚˜ í´ë˜ìŠ¤ ìƒì„±ì€ ì—†ë‹¤.

í•˜ì§€ë§Œ ì´ ì½”ë“œëŠ” ë¦¬ìŠ¤íŠ¸ë¥¼ ê±¸ëŸ¬ë‚¸ ê²°ê³¼ë¥¼ ì €ì¥í•˜ëŠ” ì¤‘ê°„ ë¦¬ìŠ¤íŠ¸ë¥¼ ë§Œë“ ë‹¤. 

ì²˜ë¦¬í•  ì›ì†Œê°€ ë§ì•„ì§€ë©´ ì¤‘ê°„ ë¦¬ìŠ¤íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ë¶€ê°€ ë¹„ìš©ë„ ê±±ì •í•  ë§Œí¼ ì»¤ì§„ë‹¤. asSequenceë¥¼ í†µí•´ ë¦¬ìŠ¤íŠ¸ ëŒ€ì‹  ì‹œí€€ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ ì¤‘ê°„ ë¦¬ìŠ¤íŠ¸ë¡œ ì¸í•œ ë¶€ê°€ ë¹„ìš©ì€ ì¤„ì–´ë“ ë‹¤. ì´ë•Œ ê° ì¤‘ê°„ ì‹œí€€ìŠ¤ëŠ” ëŒë‹¤ë¥¼ í•„ë“œì— ì €ì¥í•˜ëŠ” ê°ì²´ë¡œ í‘œí˜„ë˜ë©°, ìµœì¢… ì—°ì‚°ì€ ì¤‘ê°„ ì‹œí€€ìŠ¤ì— ìˆëŠ” ì—¬ëŸ¬ ëŒë‹¤ë¥¼ ì—°ì‡„ í˜¸ì¶œí•œë‹¤. ì´ë•Œ, ëŒë‹¤ë¥¼ ì €ì¥í•´ì•¼ í•¨ìœ¼ë¡œ ëŒë‹¤ë¥¼ ì¸ë¼ì¸í•˜ì§€ ì•ŠëŠ”ë‹¤. 

ë”°ë¼ì„œ. ì§€ì—° ê³„ì‚°ì„ í†µí•´ ì„±ëŠ¥ í–¥ìƒì‹œí‚¤ë ¤ëŠ” ì´ìœ ë¡œ ëª¨ë“  ì»¬ë ‰ì…˜ ì—°ì‚°ì— asSequenceë¥¼ ë¶™ì—¬ì„œëŠ” ì•ˆëœë‹¤.

ì‹œí€€ìŠ¤ ì—°ì‚°ì—ì„œëŠ” ëŒë‹¤ê°€ ì¸ë¼ì´ë‹ ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— í¬ê¸°ê°€ ì‘ì€ ì»¬ë ‰ì…˜ì€ ì˜¤íˆë ¤ ì¼ë°˜ ì»¬ë ‰ì…˜ ì—°ì‚°ì´ ë” ë‚˜ì„ ìˆ˜ë„ ìˆë‹¤. ì‹œí€€ìŠ¤ë¥¼ í†µí•´ ì„±ëŠ¥ì„ í–¥ìƒ ì‹œí‚¬ ìˆ˜ ìˆëŠ” ê²½ìš°ëŠ” ì»¬ë ‰ì…˜ í¬ê¸°ê°€ í° ê²½ìš° ë¿ì´ë‹¤. 

## 8.2.4 í•¨ìˆ˜ë¥¼ ì¸ë¼ì¸ìœ¼ë¡œ ì„ ì–¸í•´ì•¼ í•˜ëŠ” ê²½ìš°

inline í‚¤ì›Œë“œì˜ ì´ì ì„ ë°°ìš°ê³  ë‚˜ë©´ ì½”ë“œë¥¼ ë” ë¹ ë¥´ê²Œ ë§Œë“¤ê¸° ìœ„í•´ ì½”ë“œ ì—¬ê¸°ì €ê¸°ì—ì„œ inlineì„ ì‚¬ìš©í•˜ê³  ì‹¶ì–´ì§ˆ ê²ƒì´ë‹¤. í•˜ì§€ë§Œ ì‚¬ì‹¤ ì´ëŠ” ì¢‹ì€ ìƒê°ì´ ì•„ë‹ˆë‹¤. inline í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•´ë„ ëŒë‹¤ë¥¼ ì¸ìë¡œ ë°›ëŠ” í•¨ìˆ˜ë§Œ ì„±ëŠ¥ì´ ì¢‹ì•„ì§ˆ ê°€ëŠ¥ì„±ì´ ë†’ë‹¤.
ì¼ë°˜ í•¨ìˆ˜ í˜¸ì¶œì˜ ê²½ìš° JVMì€ ì´ë¯¸ ê°•ë ¥í•˜ê²Œ ì¸ë¼ì´ë‹ì„ ì§€ì›í•œë‹¤. JVMì€ ì½”ë“œ ì‹¤í–‰ì„ ë¶„ì„í•´ì„œ ê°€ì¥ ì´ìµì´ ë˜ëŠ” ë°©í–¥ìœ¼ë¡œ í˜¸ì¶œì„ ì¸ë¼ì´ë‹í•œë‹¤. ì´ëŸ° ê³¼ì •ì€ ë°”ì´íŠ¸ì½”ë“œë¥¼ ì‹¤ì œ ê¸°ê³„ì–´ ì½”ë“œë¡œ ë²ˆì—­í•˜ëŠ” ê³¼ì •(JIT)ì—ì„œ ì¼ì–´ë‚œë‹¤. ì´ëŸ° JVMì˜ ìµœì í™”ë¥¼ í™œìš©í•œë‹¤ë©´ ë°”ì´íŠ¸ì½”ë“œì—ì„œëŠ” ê° í•¨ìˆ˜ êµ¬í˜„ì´ ì •í™•íˆ í•œ ë²ˆë§Œ ìˆìœ¼ë©´ ë˜ê³ , ê·¸ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ë¶€ë¶„ì—ì„œ ë”°ë¡œ í•¨ìˆ˜ ì½”ë“œë¥¼ ì¤‘ë³µí•  í•„ìš”ê°€ ì—†ë‹¤. ë°˜ë©´ ì½”í‹€ë¦° ì¸ë¼ì¸ í•¨ìˆ˜ëŠ” ë°”ì´íŠ¸ ì½”ë“œì—ì„œ ê° í•¨ìˆ˜ í˜¸ì¶œ ì§€ì ì„ í•¨ìˆ˜ ë³¸ë¬¸ìœ¼ë¡œ ëŒ€ì¹˜í•˜ê¸° ë•Œë¬¸ì— ì½”ë“œ ì¤‘ë³µì´ ìƒê¸´ë‹¤. ê²Œë‹¤ê°€ í•¨ìˆ˜ë¥¼ ì§ì ‘ í˜¸ì¶œí•˜ë©´ ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤ê°€ ë” ê¹”ë”í•´ì§„ë‹¤.

ë°˜ë©´ ëŒë‹¤ë¥¼ ì¸ìë¡œ ë°›ëŠ” í•¨ìˆ˜ë¥¼ ì¸ë¼ì´ë‹ í•˜ë©´ ì´ìµì´ ë” ë§ë‹¤.

1. ì¸ë¼ì´ë‹ì„ í†µí•´ ì—†ì•¨ ìˆ˜ ìˆëŠ” ë¶€ê°€ ë¹„ìš©ì´ ìƒë‹¹í•˜ë‹¤. í•¨ìˆ˜ í˜¸ì¶œ ë¹„ìš©ì„ ì¤„ì¼ ìˆ˜ ìˆì„ ë¿ ì•„ë‹ˆë¼ ëŒë‹¤ë¥¼ í‘œí˜„í•˜ëŠ” í´ë˜ìŠ¤ë‚˜ ëŒë‹¤ ì¸ìŠ¤í„´ìŠ¤ì— í•´ë‹¹í•˜ëŠ” ê°ì²´ë¥¼ ë§Œë“¤ í•„ìš”ë„ ì—†ì–´ì§„ë‹¤.
2. í˜„ì¬ì˜ JVMì€ í•¨ìˆ˜ í˜¸ì¶œê³¼ ëŒë‹¤ë¥¼ ì¸ë¼ì´ë‹í•´ ì¤„ ì •ë„ë¡œ ë˜‘ë˜‘í•˜ì§€ëŠ” ëª»í•˜ë‹¤.
3. ì¸ë¼ì¸ì„ ì‚¬ìš©í•˜ë©´ ì¼ë°˜ ëŒë‹¤ì—ì„œëŠ” ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” ëª‡ê°€ì§€ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ex) ë„Œë¡œì»¬ë°˜í™˜

í•˜ì§€ë§Œ inline ë³€ê²½ìë¥¼ í•¨ìˆ˜ì— ë¶™ì¼ ë•ŒëŠ” ì½”ë“œ í¬ê¸°ì— ì£¼ì˜ë¥¼ ê¸°ìš¸ì—¬ì•¼ í•œë‹¤. ì¸ë¼ì´ë‹í•˜ëŠ” í•¨ìˆ˜ê°€ í° ê²½ìš° í•¨ìˆ˜ì˜ ë³¸ë¬¸ì— í•´ë‹¹í•˜ëŠ” ë°”ì´íŠ¸ì½”ë“œë¥¼ ëª¨ë“  í˜¸ì¶œ ì§€ì ì— ë³µì‚¬í•´ ë„£ê³  ë‚˜ë©´ ë°”ì´íŠ¸ì½”ë“œê°€ ì „ì²´ì ìœ¼ë¡œ ì•„ì£¼ ì»¤ì§ˆ ìˆ˜ ìˆë‹¤.

## 8.2.5 ìì› ê´€ë¦¬ë¥¼ ìœ„í•œ ì¸ë¼ì¸ëœ ëŒë‹¤ ì‚¬ìš©

**withrock**

```kotlin
val l:Lock = ...
l.withLock{//ë½ì„ ì ê·¼ ë‹¤ìŒì— ì£¼ì–´ì§„ ë™ì‘ì„ ìˆ˜í–‰í•œë‹¤.
			//ë½ì— ì˜í•´ ë³´í˜¸ë˜ëŠ” ìì›ì„ ì‚¬ìš©í•œë‹¤
}
```

**use**: ìë°”ì˜ try-with-resoureì™€ ê°™ì€ ê¸°ëŠ¥ , ë‹«ì„ ìˆ˜ ìˆëŠ” ìì›ì— ëŒ€í•œ í™•ì¥ í•¨ìˆ˜. ëŒë‹¤ë¥¼ ì¸ìë¡œ ë°›ìŒ. 

ëŒë‹¤ë¥¼ í˜¸ì¶œí•œ ë‹¤ìŒì— ìì›ì„ ë‹«ì•„ì¤€ë‹¤.(ì˜ˆì™¸ì¸ê²½ìš°ì—ë„ ë™ì¼), useë„ ì¸ë¼ì¸ í•¨ìˆ˜ë‹¤.

```kotlin
fun readFirstLineFromFile(path: String): String {
    BufferedReader(FileReader(path)).use { br -> //BufferedReader ê°ì²´ë¥¼ ë§Œë“¤ê³  
                                //"use"í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ì„œ íŒŒì¼ì— ëŒ€í•œ ì—°ì‚°ì„ ì‹¤í–‰í•  ëŒë‹¤ë¥¼ ë„˜ê¸´ë‹¤
        return br.readLine()//ìì›(íŒŒì¼)ì—ì„œ ë§¨ ì²˜ìŒ ê°€ì ¸ì˜¨ í•œ ì¤„ì„ ëŒë‹¤ê°€ ì•„ë‹Œ readFirstFromFileì— ë°˜í™˜í•œë‹¤.
    }
}
```

# 8.3 ê³ ì°¨ í•¨ìˆ˜ ì•ˆì—ì„œ íë¦„ ì œì–´

## 8.3.1 ëŒë‹¤ ì•ˆì˜ return ë¬¸: ëŒë‹¤ë¥¼ ë‘˜ëŸ¬ì‹¼ í•¨ìˆ˜ë¡œë¶€í„° ë°˜í™˜

Aliceë¥¼ ì°¾ëŠ” ì˜ˆì œ

1. ì¼ë°˜ ë£¨í”„ì—ì„œ return ì‚¬ìš©

```kotlin
data class Person(val name: String, val age: Int)

val people = listOf(Person("Alice", 29), Person("Bob", 31))

fun lookForAlice(people: List<Person>) {
    for (person in people) {
        if (person.name == "Alice") {
            println("Found!")
            return
        }
    }
    println("Alice is not found")
}

fun main(args: Array<String>) {
    lookForAlice(people)
}
```

1. forEachë¡œ ë³€ê²½í•œ ê²½ìš°. 

```kotlin
data class Person(val name: String, val age: Int)

val people = listOf(Person("Alice", 29), Person("Bob", 31))

fun lookForAlice(people: List<Person>) {
    people.forEach {
        if (it.name == "Alice") {
            println("Found!")
            return //forë¬¸ì˜ returnê³¼ ë™ì¼í•˜ë‹¤. ëŒë‹¤ë¥¼ ì‹¤í–‰í•œ í•¨ìˆ˜ê°€ ëë‚´ê³  ë°˜í™˜ëœë‹¤. 
        }
    }
    println("Alice is not found")
}

fun main(args: Array<String>) {
    lookForAlice(people)
}
```

ë„Œë¡œì»¬ return : ìì‹ ì„ ë‘˜ëŸ¬ì‹¸ê³  ìˆëŠ” ë¸”ë¡ë³´ë‹¤ ë” ë°”ê¹¥ì— ìˆëŠ” ë‹¤ë¥¸ ë¸”ë¡ì„ ë°˜í™˜í•˜ê²Œ ë§Œë“œëŠ” return ë¬¸.

ì¸ë¼ì¸ í•¨ìˆ˜ê°€ ë„Œë¡œì»¬ returnì„ ì§€ì›í•˜ê¸° ë•Œë¬¸ì— ê°€ëŠ¥. 

## 8.3.2 ëŒë‹¤ë¡œë¶€í„° ë°˜í™˜: ë ˆì´ë¸”ì„ ì‚¬ìš©í•œ return

ëŒë‹¤ì‹ì—ì„œ local returnì€ ê°€ëŠ¥í•˜ë‹¤. = forë¬¸ì˜ breakì™€ ë™ì¼. 

:ëŒë‹¤ì˜ í˜¸ì¶œì„ ëë‚´ê³  í˜¸ì¶œì„ ì‹¤í–‰í–ˆë˜ ì½”ë“œì˜ ì‹¤í–‰ì„ ì´ì–´ê°„ë‹¤. ë„Œë¡œì»¬ê³¼ì˜ êµ¬ë¶„ì„ ìœ„í•´ @labelì„ ì‚¬ìš©í•œë‹¤. 

```kotlin
data class Person(val name: String, val age: Int)

val people = listOf(Person("Alice", 29), Person("Bob", 31))

fun lookForAlice(people: List<Person>) {
    people.forEach label@{ //ëŒë‹¤ì‹ ì•ì— ë ˆì´ë¸”ì„ ë¶™ì¸ë‹¤. : ëŒë‹¤ë ˆì´ë¸” 
        if (it.name == "Alice") return@label //ì•ì—ì„œ ì •ì˜í•œ ë ˆì´ë¸”ì„ ì°¸ì¡°í•œë‹¤.:ë¦¬í„´ì‹ë ˆì´ë¸”
    }
    println("Alice might be somewhere")// ì´ì¤„ì´ í•­ìƒ ì¶œë ¥ëœë‹¤. 
}

fun main(args: Array<String>) {
    lookForAlice(people)
}
```

```kotlin
data class Person(val name: String, val age: Int)

val people = listOf(Person("Alice", 29), Person("Bob", 31))

fun lookForAlice(people: List<Person>) {
    people.forEach {
        if (it.name == "Alice") return@forEach //ì¸ë¼ì¸í•¨ìˆ˜ ì´ë¦„ì„ ë ˆì´ë¸”ë¡œ ì‚¬ìš©í•´ë„ ëœë‹¤.
    }
    println("Alice might be somewhere")
}

fun main(args: Array<String>) {
    lookForAlice(people)
}
```

<aside>
ğŸ’¡ ëŒë‹¤ì‹ì˜ ë ˆì´ë¸”ì„ ëª…ì‹œí•˜ë©´ í•¨ìˆ˜ì´ë¦„ì„ ë ˆì´ë¸”ë¡œ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤ëŠ” ì ì— ìœ ì˜í•˜ë¼. ëŒë‹¤ ì‹ì—ëŠ” ë ˆì´ë¸”ì´ 2ê°œì´ìƒ ë¶™ì„ ìˆ˜ ì—†ë‹¤.

</aside>

thisì‹ì˜ ë ˆì´ë¸”ì—ë„ ë§ˆì°¬ê°€ì§€ ê·œì¹™ì´ ì ìš©ëœë‹¤. 

```kotlin
fun main(args: Array<String>) {
    println(StringBuilder().apply sb@{ //ìˆ˜ì‹ ê°ì²´ ì§€ì • ëŒë‹¤ ì•ì— ë ˆì´ë¸”ì„ ë¶™íŒ ê²½ìš° í•´ë‹¹ ë ˆì´ë¸”ë¡œ ìˆ˜ì‹  ê°ì²´ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.
       listOf(1, 2, 3).apply {
           this@sb.append(this.toString()) //ë°”ê¹¥ ìˆ˜ì‹  ê°ì²´ì— ì ‘ê·¼í•  ë• ë ˆì´ë¸”ì„ ëª…ì‹œí•´ì•¼í•œë‹¤.
       }
    })
}
```

## 8.3.3 ë¬´ëª… í•¨ìˆ˜: ê¸°ë³¸ì ìœ¼ë¡œ ë¡œì»¬ return

ë¬´ëª…í•¨ìˆ˜ ì•ˆì— return ì‚¬ìš©

```kotlin
data class Person(val name: String, val age: Int)

val people = listOf(Person("Alice", 29), Person("Bob", 31))

fun lookForAlice(people: List<Person>) {
    people.forEach(fun (person) { //ëŒë‹¤ì‹ëŒ€ì‹  ë¬´ëª…í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤. 
        if (person.name == "Alice") return //ê°€ì¥ ê°€ê¹Œìš´ í•¨ìˆ˜ì¸ ë¬´ëª…í•¨ìˆ˜ë¥¼ ê°€ë¦¬í‚¤ê²Œëœë‹¤. 
        println("${person.name} is not Alice")
    })
}

fun main(args: Array<String>) {
    lookForAlice(people)
}

/*
Bob is not Alice
*/
```

: ë¬´ëª…í•¨ìˆ˜ ì•ˆì—ì„œ ë ˆì´ë¸”ì´ ë¶™ì§€ ì•Šì€ return ì‹ì€ ë¬´ëª…í•¨ìˆ˜ ìì²´ë¥¼ ë°˜í™˜ì‹œí‚¬ ë¿, ë¬´ëª…í•¨ìˆ˜ë¥¼ ë‘˜ëŸ¬ì‹¼ ë‹¤ë¥¸ í•¨ìˆ˜ë¥¼ ë°˜í™˜ì‹œí‚¤ì§€ ì•ŠëŠ”ë‹¤. ì‚¬ì‹¤ returnì— ì ìš©ë˜ëŠ” ê·œì¹™ì€ fun í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•´ ì •ì˜ëœ ê°€ì¥ ì•ˆìª½ í•¨ìˆ˜ë¥¼ ë°˜í™˜ì‹œí‚¨ë‹¤ëŠ” ì ì´ë‹¤. 

![Untitled](8%E1%84%8C%E1%85%A1%E1%86%BC%20%E1%84%80%E1%85%A9%E1%84%8E%E1%85%A1%20%E1%84%92%E1%85%A1%E1%86%B7%E1%84%89%E1%85%AE%20%E1%84%91%E1%85%A1%E1%84%85%E1%85%A1%E1%84%86%E1%85%B5%E1%84%90%E1%85%A5%E1%84%8B%E1%85%AA%20%E1%84%87%E1%85%A1%E1%86%AB%E1%84%92%E1%85%AA%E1%86%AB%20%E1%84%80%E1%85%A1%E1%86%B9%E1%84%8B%E1%85%B3%E1%84%85%E1%85%A9%20%E1%84%85%E1%85%A1%E1%86%B7%E1%84%83%E1%85%A1%20%E1%84%89%E1%85%A1%2029966cb659d840a4956d02e075d077c2/Untitled.png)

ìš”ì•½

- í•¨ìˆ˜ íƒ€ì…ì„ ì‚¬ìš©í•´ í•¨ìˆ˜ì— ëŒ€í•œ ì°¸ì¡°ë¥¼ ë‹´ëŠ” ë³€ìˆ˜ë‚˜ íŒŒë¼ë¯¸í„°ë‚˜ ë°˜í™˜ ê°’ì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤.
- ê³ ì°¨ í•¨ìˆ˜ëŠ” ë‹¤ë¥¸ í•¨ìˆ˜ë¥¼ ì¸ìë¡œ ë°›ê±°ë‚˜ í•¨ìˆ˜ë¥¼ ë°˜í™˜í•œë‹¤. í•¨ìˆ˜ì˜ íŒŒë¼ë¯¸í„° íƒ€ì…ì´ë‚˜ ë°˜í™˜ íƒ€ì…ìœ¼ë¡œ í•¨ìˆ˜ íƒ€ì…ì„ ì‚¬ìš©í•˜ë©´ ê³ ì°¨ í•¨ìˆ˜ë¥¼ ì„ ì–¸í•  ìˆ˜ ìˆë‹¤.
- ì¸ë¼ì¸ í•¨ìˆ˜ë¥¼ ì»´íŒŒì¼í•  ë•Œ ì»´íŒŒì¼ëŸ¬ëŠ” ê·¸ í•¨ìˆ˜ì˜ ë³¸ë¬¸ê³¼ ê·¸ í•¨ìˆ˜ì—ê²Œ ì „ë‹¬ëœ ëŒë‹¤ì˜ ë³¸ë¬¸ì„ ì»´íŒŒì¼í•œ ë°”ì´íŠ¸ì½”ë“œë¥¼ ëª¨ë“  í•¨ìˆ˜ í˜¸ì¶œ ì§€ì ì— ì‚½ì…í•´ì¤€ë‹¤. ì´ë ‡ê²Œ ë§Œë“¤ì–´ì§€ëŠ” ë°”ì´íŠ¸ì½”ë“œëŠ” ëŒë‹¤ë¥¼ í™œìš©í•œ ì¸ë¼ì¸ í•¨ìˆ˜ ì½”ë“œë¥¼ í’€ì–´ì„œ ì§‘ì  ì“´ ê²½ìš°ì™€ ë¹„êµí•  ë•Œ ì•„ë¬´ ë¶€ê°€ ë¹„ìš©ì´ ë“¤ì§€ ì•ŠëŠ”ë‹¤.
- ê³ ì°¨ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ ì»´í¬ë„ŒíŠ¸ë¥¼ ì´ë£¨ëŠ” ê° ë¶€ë¶„ì˜ ì½”ë“œë¥¼ ë” ì˜ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ë˜ ê³ ì°¨ í•¨ìˆ˜ë¥¼ í™œìš©í•´ ê°•ë ¥í•œ ì œë„¤ë¦­ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.
- ì¸ë¼ì¸ í•¨ìˆ˜ì—ì„œëŠ” ëŒë‹¤ ì•ˆì— ìˆëŠ” return ë¬¸ì´ ë°”ê¹¥ìª½ í•¨ìˆ˜ë¥¼ ë°˜í™˜ì‹œí‚¤ëŠ” ë„Œë¡œì»¬ returnì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
- ë¬´ëª… í•¨ìˆ˜ëŠ” ëŒë‹¤ ì‹ì„ ëŒ€ì‹ í•  ìˆ˜ ìˆìœ¼ë©° return ì‹ì„ ì²˜ë¦¬í•˜ëŠ” ê·œì¹™ì´ ì¼ë°˜ ëŒë‹¤ ì‹ê³¼ëŠ” ë‹¤ë¥´ë‹¤. ë³¸ë¬¸ ì—¬ëŸ¬ ê³³ì—ì„œ return í•´ì•¼ í•˜ëŠ” ì½”ë“œ ë¸”ë¡ì„ ë§Œë“¤ì–´ì•¼ í•œë‹¤ë©´ ëŒë‹¤ ëŒ€ì‹  ë¬´ëª… í•¨ìˆ˜ë¥¼ ì“¸ ìˆ˜ ìˆë‹¤.